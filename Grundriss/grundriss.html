<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<!-- @version SVN: $Id: visualisierungsframework.html 353 2012-05-06 20:39:53Z illya $ -->
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Grundriss</title>

		<script src="./vendor/jquery.js"></script>
		<script src="./vendor/bootstrap/js/bootstrap.js"></script>
	    <script src="./vendor/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.min.js"></script>
	    <script src="./vendor/jquery.ui.touch-punch.js"></script>
	    <script src="./vendor/bootbox.min.js"></script>
	    <script src="./vendor/bootstrap-switch-master/static/js/bootstrap-switch.js"></script>
	    
	    
	    		<!-- support lib for bezier stuff -->
		<script src="./vendor/jsPlumb-master/lib/jsBezier-0.6.js"></script>     
        <!-- jsplumb geom functions -->   
        <script src="./vendor/jsPlumb-master/lib/jsplumb-geom-0.1.js"></script>
		<!-- jsplumb util -->
		<script src="./vendor/jsPlumb-master/src/util.js"></script>
        <!-- base DOM adapter -->
		<script src="./vendor/jsPlumb-master/src/dom-adapter.js"></script>        
		<!-- main jsplumb engine -->
		<script src="./vendor/jsPlumb-master/src/jsPlumb.js"></script>
        <!-- endpoint -->
		<script src="./vendor/jsPlumb-master/src/endpoint.js"></script>                
        <!-- connection -->
		<script src="./vendor/jsPlumb-master/src/connection.js"></script>
        <!-- anchors -->
		<script src="./vendor/jsPlumb-master/src/anchors.js"></script>        
		<!-- connectors, endpoint and overlays  -->
		<script src="./vendor/jsPlumb-master/src/defaults.js"></script>
        <!-- bezier connectors -->
        <script src="./vendor/jsPlumb-master/src/connectors-bezier.js"></script>
		<!-- state machine connectors -->
		<script src="./vendor/jsPlumb-master/src/connectors-statemachine.js"></script>
        <!-- flowchart connectors -->
		<script src="./vendor/jsPlumb-master/src/connectors-flowchart.js"></script>
		<!-- SVG renderer -->
		<script src="./vendor/jsPlumb-master/src/renderers-svg.js"></script>
		<!-- canvas renderer -->
		<script src="./vendor/jsPlumb-master/src/renderers-canvas.js"></script>
		<!-- vml renderer -->
		<script src="./vendor/jsPlumb-master/src/renderers-vml.js"></script>
	    <script type="text/javascript" src="./vendor/jsPlumb-master/src/jquery.jsPlumb.js "></script>
	    
	    
	    <script src="./js/projectSupport.js"></script>
	    <script src="./js/tablesHandler.js"></script>
	    <script src="./js/linesHandler.js"></script>
	    
    	<link rel="stylesheet" href="./vendor/jquery-ui-1.10.3.custom/css/ui-lightness/jquery-ui-1.10.3.custom.min.css" />
  		<link href="./vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
  		<link href="./vendor/jsPlumb-master/demo/demo-all.css" rel="stylesheet" media="screen">
  		<link href="./vendor/bootstrap-switch-master/static/stylesheets/bootstrap-switch.css" rel="stylesheet" media="screen">
  		
  		
  		<style>
  			body {
		  			padding-top: 60px;
		  			background:#EAF1F2;
				}
  		
			  .table { width:120px; height: 40px; border:2px solid black;  opacity: 0.7;  background-color:#A47E3C}					
				
				.ui-resizable-handle {
				  height: 14px;
				}

				.ui-widget-content {
				 /*  background: url("images/ui-bg_flat_75_ffffff_40x100.png") repeat-x scroll 50% 50% rgb(255, 255, 255); */
					background: #A47E3C;
    			}
				
				 .ui-resizable-se {
				 	 background-image: url(""); 
				 	 }
				
				.ui-resizable-sw {
				    background-color:#ABABAB;
				    
				    width: 10px;
				    height: 10px;
				}

				.ui-resizable-ne {
				    background-color:#ABABAB;
				    width: 10px;
				    height: 10px;
				}
				
				.ui-resizable-nw {
				    background-color:#ABABAB;
				    width: 10px;
				    height: 10px;
				}
				.window {
				    background-color: blue;
				    border: 1px solid rgb(52, 103, 137);
				    box-shadow: 2px 2px 19px rgb(224, 224, 224);
				    border-radius: 0.5em;
				    position: absolute;
				    color: black;
				    padding: 0.5em;
				    width: 1px;
				    height: 1px;
				    line-height: 1px;
				    font-size: 0.8em;
				    transition: box-shadow 0.15s ease-in 0s;
				}
				
		  </style>
		

	</head>
	 <body>


		<!-- Define divs here -->

		<!-- Navigation panel -->

		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container-fluid">
					<a class="brand" href="http://www.linkZuUnseremApp.com">ProjectX</a>
					<ul class="nav nav-tabs">
					  <li ><a href="home.html">Home</a></li>
					  <li class="active"><a href="#">Grundriss</a></li>
					  <li><a href="kalender.html">Kalender</a></li>
					
					
					  <li class="divider-vertical"> </li>
					  <li>					
						 <button id="addTable" type="button" class="btn btn-small btn-primary">Add table </button>
					  </li> 
					
					  <li class="divider-vertical">                		
                	  </li>
                	
                	  <li>
                		<p class="navbar-text">Line mode: </p> 
              		  </li>    
                		
                	  <li>
                		 <form class="navbar-search">
	                		<div id= "lineModeBTN" class="make-switch switch-small">
	    						<input type="checkbox" />
							</div>
						 </form>
                	  </li>  
					 	
					</ul>
					
					<div class = "pull-right">
						<a class="brand " href="http://www.linkZuUnseremApp.com" > <img alt="ProjectX"
						src="./images/x-men_logo.png"  style="height:30px;"> </a>
					</div>
					
				</div>
			</div>
		</div>


		<div class="container-fluid">
			  <div class="row-fluid">
			    <div class="span12">	    	

						<div id="floor_plan" style="border:2px solid black; background-color:#EBFCC6";>

  					    </div>
									
					
				</div>
		 
		 	 </div>
		   </div>


		<!-- Loading the page  -->
		<script defer="defer" type="text/javascript">	
				var floorDivHeight = $(window).height() - 80;
				$('#floor_plan').height(floorDivHeight);	
				var tablesHandler = new TablesHandler(); 
				var linesHandler = new LinesHandler(); 
				
				function drawLines(e) {
					console.log(e);
					    	if (clickCounter == 0) {
						    	x1 = e.clientX;
						    	y1 = e.clientY;
						    	var pointOptions = {"top":  y1, "left": x1};
						    	startPoint = linesHandler.createPoint(pointOptions);
						    	console.log(startPoint);
						    	clickCounter ++;				    	
					    	} else {
					    		x2 = e.clientX;
						    	y2 = e.clientY;
						    	var pointOptions = {"top":  y2, "left": x2};
						    	lastPoint = linesHandler.createPoint(pointOptions);
					    		linesHandler.createLine(startPoint, lastPoint);
					    		startPoint = lastPoint; 			    		
					    	}
				}
				
				var clickCounter = 0;
				var lineModeBTN = $('#lineModeBTN');
				lineModeBTN.on('switch-change', function () {
					console.log("mach nichts");
					if (lineModeBTN.bootstrapSwitch('status') === true) {
						var startPoint = null;
						var lastPoint = null;
					    $("#floor_plan").dblclick(function(e) {
					    	drawLines(e);
					    });
					} else {
						clickCounter = 0;
						linesHandler.polygonIsFinished();
						 $("#floor_plan").unbind('dblclick');
					}

				});
				
				



  		</script>

	</body>
</html>



